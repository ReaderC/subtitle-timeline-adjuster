[English Version](./README.en.md)

# 字幕时间轴调整工具

一个轻量级的、支持本地文件和服务器文件浏览的 Web 工具，用于调整字幕文件（.srt, .ass）的时间轴，并提供实时预览功能。

![应用截图](./assets/应用截图.png)

---

本工具旨在提供一个简单、快速、轻量化的解决方案，用于调整字幕时间戳。它采用纯 JavaScript 后端，使其可以轻松地跨平台运行，并支持两种文件加载模式。

## ✨ 功能特性

- **双模式文件处理**: 
  - **本地模式**: 通过拖拽或文件选择器直接上传你电脑上的文件。
  - **服务器模式**: 直接浏览和加载在你服务器上指定目录中的媒体文件。
- **实时调整**: 在浏览器中即时预览字幕的时间变化。
- **灵活的控制方式**: 快捷微调、手动输入、可变播放速度。
- **Token 鉴权**: 服务器模式下的文件访问可以通过 Token 进行保护。
- **跨平台**: 可在 Windows、macOS 和 Linux 上运行 (需要 Node.js 环境)。
- **轻量化**: 无 `ffmpeg` 依赖。
- **字幕编辑器交互优化**: 
  - 点击字幕显示框中的字幕，编辑器将自动跳转到对应行并高亮显示。
  - 字幕编辑器默认隐藏，仅在点击字幕显示框中的字幕后才会显示。
  - 字幕编辑器新增关闭按钮，可手动隐藏编辑器。

## 🛠️ 技术栈

- **后端**: Node.js, Express, PM2, Multer
- **前端**: 原生 JavaScript (HTML5, CSS3)

## 🚀 快速上手 (开发模式)

1.  **克隆仓库**并进入目录。
2.  **安装依赖**: `npm install`
3.  **配置 (可选)**: 如果需要启用服务器文件浏览，请按“部署”章节的说明创建和修改 `config.json` 文件。
4.  **运行服务**: `node src/server.js`
5.  **打开应用**: 浏览器访问 `http://localhost:3000`。

## 🚢 部署 (生产环境)

我们推荐使用 PM2 来进行持久化部署，本项目已内置相关依赖和脚本。

1.  **安装与配置**: 确保你已克隆项目，安装了依赖 (`npm install`)，并根据需要配置好了 `config.json`。

2.  **启动应用**:
    ```bash
    npm start
    ```
    此命令会使用 PM2 在后台启动并守护应用。应用将在服务器重启后自动恢复。

3.  **设置开机自启 (仅需一次)**:
    为了让 PM2 能随系统启动，需要执行一个一次性的设置命令：
    ```bash
    pm2 startup
    ```
    - 该命令会生成另一行命令，请**复制并执行它**（在 Linux/macOS 上可能需要 `sudo` 权限）。
    - 最后，运行 `pm2 save` 来保存当前的应用列表，以便开机时加载。

4.  **管理应用**:
    - `npm stop`: 停止应用。
    - `npm run restart`: 重启应用。
    - `npm run logs`: 查看日志。
    - `npm run monit`: 打开性能监控。
    - `npm run delete`: 从 PM2 管理中移除应用。

## 📝 使用流程

1.  **(服务器模式)** 如果你配置了 Token，请先在左上角的“服务器设置”中输入它。
2.  **添加文件**: 点击“添加文件”按钮，选择“从本地上传”或“从服务器浏览”。
3.  **调整与保存**: 在列表中选择文件加载到播放器，使用右侧面板调整，满意后点击“保存字幕”。

## 📄 开源协议

本项目采用 ISC 许可证。
